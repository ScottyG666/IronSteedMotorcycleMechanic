<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/headers/header :: page_head('Inventory - ISMM Admin')" />
<body>
	<div class="container-fluid">
		<div th:replace="fragments/navigation/nav :: menu"></div>
		<div>
			<h2>Manage Inventory</h2>	

			<a th:href="@{/inventory/new}" class="fas fa-folder-plus fa-2x icon-dark mr-2"></a>
			<a th:href="@{/inventory/export/csv}" class="fas fa-file-csv fa-2x icon-dark mr-2"></a>

		</div>

		<div th:if="${message != null}" class="alert alert-success text-center">
			[[${message}]]
		</div>



		<div>
			<form th:action="@{/inventory/page/1}" class="form-inline m-3">
				Filter:&nbsp;
				<input type="search" name="keyWord" th:value="${keyWord}" class="form-control" required/>
				&nbsp;&nbsp;
				<button type="submit" class="btn btn-primary">
					<i class="fas fa-search"></i>
				</button>
				&nbsp;&nbsp;
				<button type="button" class="btn btn-secondary" onclick="clearFilter()">
					<i class="fas fa-eraser"></i>
				</button>
			</form>
		</div>

		<div class="full-details">
			<table class="table table-bordered table-striped table-hover table-responsive-xl">
				<thead class="thead-dark">
					<tr>
						<th>ID</th>
						<th>Item Image</th>
						<th>
							<a class="text-white" th:href="@{'/inventory/page/' + ${pageNum} + '?sortDir=' + ${reverseSortDir}}">Item Name</a>
							<span th:class="${reverseSortDir == 'desc' ? 'fas fa-sort-up' : 'fas fa-sort-down'}"></span>
						</th>
						<th>Alias</th>
						<th>Enabled</th>
						<th></th>
					</tr>								
				</thead>
				<tbody>
					<tr th:each="invItem : ${listInventoryItems}">
						<td>[[${invItem.id}]]</td>
						<td>
							<img th:src="@{${invItem.imagePath}}" style="width: 100px" class="img-fluid"/>
						</td>
						<td>[[${invItem.name}]]</td>
						<td>[[${invItem.alias}]]</td>
						<td>
							<div th:replace="fragments/lists/lists :: inventory_item_status" />
						</td>
						<td>
							<div th:replace="fragments/lists/lists :: inventory_item_action" />
						</td>					
					</tr>
				</tbody>
			</table>
		</div>

		<div th:replace="fragments/lists/lists :: pagination('/inventory', 'top-level Items')"></div>


		<div th:replace="fragments/modal_fragments/modal :: confirm_modal"></div>


		<div th:replace="fragments/footer/footer :: footer"></div>

	</div>
	<script th:src="@{/js/common_list.js}"></script>
	<script type="text/javascript">
		moduleURL = "[[@{/inventory}]]";

		$(document).ready(function() {
			$(".link-delete").on("click", function(e) {
				e.preventDefault();
				showDeleteConfirmModal($(this), 'inventory item');
			});
		});
	</script>
</body>
</html> 